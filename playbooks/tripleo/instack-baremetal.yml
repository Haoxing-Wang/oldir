---

- name: prepare for undercloud install
  hosts: local
  roles:
    - { role: tripleo/instack/setup-env/baremetal-setup-undercloud }

- name: install undercloud on baremetal
  hosts: instack-undercloud
  roles:
    - { role: tripleo/instack/common-undercloud }
    - { role: tripleo/instack/common }
    - { role: tripleo/instack/instack-undercloud-baremetal}

- name: deploy and test overcloud
  hosts: instack-undercloud-stack
  roles:
    - { role: tripleo/instack/common }
    - { role: tripleo/instack/deploy-overcloud }
    - { role: tripleo/instack/test-overcloud}

