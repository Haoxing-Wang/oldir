---
- name: Setup networking (general)
  lineinfile: dest=/etc/sysconfig/network regexp='^HOSTNAME=.*' line='HOSTNAME={{ inventory_hostname }}' state=present
  notify:
      - reboot
      - Wait for host to stop
      - Wait for host to come back

- name: Setup networking (interfaces)
  template: src=../templates/etc/sysconfig/network-scripts/ifcfg-interface dest=/etc/sysconfig/network-scripts/ifcfg-${item} owner=root group=root mode=644
  with_items: $net_interfaces
  notify:
      - reboot
      - Wait for host to stop
      - Wait for host to come back

- meta: flush_handlers
- name: Reload facts
  action: setup
